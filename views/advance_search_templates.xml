<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!-- Insert a compact "Matching content" block ONLY on /slides/all -->
  <template id="courses_all_include_matching_slides"
            inherit_id="website_slides.courses_all"
            name="Courses All - Include Matching Slides">
    <!-- Robust anchor: append inside #wrap (works across themes) -->
    <xpath expr="//div[@id='wrap']" position="inside">
      <t t-if="advanced_slides">
        <section id="o_wslides_matching_content" class="container my-4">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h2 class="h4 mb-0">
              Matching content
              <t t-if="advanced_slides_count and advanced_slides_count &gt; len(advanced_slides)">
                <span class="text-muted small">
                  (<t t-esc="len(advanced_slides)"/> of <t t-esc="advanced_slides_count"/>)
                </span>
              </t>
            </h2>
            <!-- Optional 'View more' — reuses current path & query -->
            <a t-att-href="request.httprequest.path + ('?search=' + (request.params.get('search') or ''))"
               class="btn btn-outline-secondary btn-sm">
              View more
            </a>
          </div>

          <div class="row g-3">
            <t t-foreach="advanced_slides" t-as="s">
              <div class="col-12 col-md-6 col-lg-4">
                <a t-att-href="s.website_url or ('/slides/slide/%s' % s.id)"
                   class="card h-100 text-decoration-none">
                  <div class="card-body">
                    <div class="small text-muted" t-if="s.channel_id" t-esc="s.channel_id.name"/>
                    <h3 class="h6 mt-1 mb-2" t-esc="s.name"/>
                    <t t-set="desc" t-value="(s.description or '').strip()"/>
                    <p class="mb-0 text-muted" t-if="desc"
                       t-esc="desc[:160] + ('…' if len(desc) &gt; 160 else '')"/>
                  </div>
                </a>
              </div>
            </t>
          </div>
        </section>
      </t>
    </xpath>
  </template>
</odoo>
